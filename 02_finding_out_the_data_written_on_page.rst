####################################
Finding out the data written on page
####################################

- Let us write a small piece of code to simulate a situation.

- This code will allocate around 10MB of space but will write only to the first 1000 integers (32*1000 bytes)

::

    #include <stdlib.h>
    int main () {
            int i;
            int *p=malloc(1024*1024*10);
            for (i=0; i<1000; i++) {
    
                    p[i]=i;
            }
            while (1) {
                    sleep(100);
            }
            return 0;
    }

- compile the code with ``gcc a.c -o sleepSleep``


- Find the running process

::

    crash> ps | grep sleep
    23996   4783   1  ffff880429e04200  IN   0.0    8100    600  sleep
    30965  19964   0  ffff8803c4160100  IN   0.0    8104    600  sleep
    30966  19961   5  ffff8804281502c0  IN   0.0    8104    600  sleep
    31437  11660   0  ffff8803dce6c280  IN   0.0    8100    596  sleep
    31633  15813   1  ffff8803c7ce0180  IN   0.0   13948    392  sleepSleep
    31754  12345   5  ffff8803b8ab6300  IN   0.0    8104    600  sleep
    31755  12503   4  ffff8803b9280500  IN   0.0    8104    600  sleep
    31756  12524   1  ffff8803c40e62c0  IN   0.0    8104    600  sleep


- See the ``vm`` of the running process    


::

    crash> vm -p 31633
    PID: 31633  TASK: ffff8803c7ce0180  CPU: 1   COMMAND: "sleepSleep"
    MM               PGD          RSS    TOTAL_VM
    ffff8803dcc79580  ffff8803c53f4000   392k    13948k 
    VMA           START       END     FLAGS FILE
    ffff8803dcc244d8     400000     401000 8001875 /home/support/crash/sleepSleep
    VIRTUAL     PHYSICAL 
    400000      3c0238000
    VMA           START       END     FLAGS FILE
    ffff8803dcc24cc0     600000     601000 8101871 /home/support/crash/sleepSleep
    VIRTUAL     PHYSICAL 
    600000      3c0444000
    VMA           START       END     FLAGS FILE
    ffff8804298392b0     601000     602000 8101873 /home/support/crash/sleepSleep
    VIRTUAL     PHYSICAL 
    601000      3b332e000
    VMA           START       END     FLAGS FILE
    ffff8803cbcae1f8 7fe5b01a0000 7fe5b0ba1000 100073 
    VIRTUAL     PHYSICAL 
            7fe5b01a0000  3b1464000
            7fe5b01a1000  (not mapped) <<< these pages are not mapped as these pages have not been written to
            7fe5b01a2000  (not mapped)
            7fe5b01a3000  (not mapped)
            7fe5b01a4000  (not mapped)
            7fe5b01a5000  (not mapped)
            7fe5b01a6000  (not mapped)
            7fe5b01a7000  (not mapped)
            7fe5b01a8000  (not mapped)
            7fe5b01a9000  (not mapped)
            7fe5b01aa000  (not mapped)
            7fe5b01ab000  (not mapped)
            7fe5b01ac000  (not mapped)
            7fe5b01ad000  (not mapped)
            7fe5b01ae000  (not mapped)
            7fe5b01af000  (not mapped)
            7fe5b01b0000  (not mapped)
            7fe5b01b1000  (not mapped)
            7fe5b01b2000  (not mapped)
            7fe5b01b3000  (not mapped)
            7fe5b01b4000  (not mapped)
            7fe5b01b5000  (not mapped)
            7fe5b01b6000  (not mapped)
            7fe5b01b7000  (not mapped)
            7fe5b01b8000  (not mapped)
            7fe5b01b9000  (not mapped)
            7fe5b01ba000  (not mapped)
            7fe5b01bb000  (not mapped)
            7fe5b01bc000  (not mapped)
            7fe5b01bd000  (not mapped)
            7fe5b01be000  (not mapped)
            7fe5b01bf000  (not mapped)
            7fe5b01c0000  (not mapped)
    7fe5b01c1000  (not mapped)


- Let us read the mapped page

::

    crash> rd -32 -p 3b1464000 1000
    3b1464000:  00000000 00000000 00a01002 00000000   ................
    3b1464010:  00000000 00000001 00000002 00000003   ................
    3b1464020:  00000004 00000005 00000006 00000007   ................
    3b1464030:  00000008 00000009 0000000a 0000000b   ................
    3b1464040:  0000000c 0000000d 0000000e 0000000f   ................
    3b1464050:  00000010 00000011 00000012 00000013   ................
    3b1464060:  00000014 00000015 00000016 00000017   ................
    3b1464070:  00000018 00000019 0000001a 0000001b   ................
    3b1464080:  0000001c 0000001d 0000001e 0000001f   ................
    3b1464090:  00000020 00000021 00000022 00000023    ...!..."...#...
    3b14640a0:  00000024 00000025 00000026 00000027   $...%...&...'...
    3b14640b0:  00000028 00000029 0000002a 0000002b   (...)...*...+...
    3b14640c0:  0000002c 0000002d 0000002e 0000002f   ,...-......./...
    3b14640d0:  00000030 00000031 00000032 00000033   0...1...2...3...
    3b14640e0:  00000034 00000035 00000036 00000037   4...5...6...7...
    3b14640f0:  00000038 00000039 0000003a 0000003b   8...9...:...;...
    3b1464100:  0000003c 0000003d 0000003e 0000003f   <...=...>...?...
    3b1464110:  00000040 00000041 00000042 00000043   @...A...B...C...
    3b1464120:  00000044 00000045 00000046 00000047   D...E...F...G...
    3b1464130:  00000048 00000049 0000004a 0000004b   H...I...J...K...
    3b1464140:  0000004c 0000004d 0000004e 0000004f   L...M...N...O...
    3b1464150:  00000050 00000051 00000052 00000053   P...Q...R...S...
    3b1464160:  00000054 00000055 00000056 00000057   T...U...V...W...
    3b1464170:  00000058 00000059 0000005a 0000005b   X...Y...Z...[...
    3b1464180:  0000005c 0000005d 0000005e 0000005f   \...]...^..._...
    3b1464190:  00000060 00000061 00000062 00000063   `...a...b...c...
    3b14641a0:  00000064 00000065 00000066 00000067   d...e...f...g...
    3b14641b0:  00000068 00000069 0000006a 0000006b   h...i...j...k...
    3b14641c0:  0000006c 0000006d 0000006e 0000006f   l...m...n...o...
    3b14641d0:  00000070 00000071 00000072 00000073   p...q...r...s...
    3b14641e0:  00000074 00000075 00000076 00000077   t...u...v...w...
    3b14641f0:  00000078 00000079 0000007a 0000007b   x...y...z...{...
    3b1464200:  0000007c 0000007d 0000007e 0000007f   |...}...~.......
    3b1464210:  00000080 00000081 00000082 00000083   ................
    3b1464220:  00000084 00000085 00000086 00000087   ................
    3b1464230:  00000088 00000089 0000008a 0000008b   ................
    3b1464240:  0000008c 0000008d 0000008e 0000008f   ................
    3b1464250:  00000090 00000091 00000092 00000093   ................
    3b1464260:  00000094 00000095 00000096 00000097   ................
    3b1464270:  00000098 00000099 0000009a 0000009b   ................
    3b1464280:  0000009c 0000009d 0000009e 0000009f   ................
    3b1464290:  000000a0 000000a1 000000a2 000000a3   ................
    3b14642a0:  000000a4 000000a5 000000a6 000000a7   ................
    3b14642b0:  000000a8 000000a9 000000aa 000000ab   ................
    3b14642c0:  000000ac 000000ad 000000ae 000000af   ................
    3b14642d0:  000000b0 000000b1 000000b2 000000b3   ................
    3b14642e0:  000000b4 000000b5 000000b6 000000b7   ................
    3b14642f0:  000000b8 000000b9 000000ba 000000bb   ................
    3b1464300:  000000bc 000000bd 000000be 000000bf   ................
    
- Here you can see the data which you have written to the page                    
